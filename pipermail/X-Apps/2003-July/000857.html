<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> find file duplicates on very large volume
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:x-apps%40listserver.themacintoshguy.com?Subject=find%20file%20duplicates%20on%20very%20large%20volume&In-Reply-To=990916C0-B8DF-11D7-A541-00306552C9FC%40village.uunet.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000856.html">
   <LINK REL="Next"  HREF="000858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">

<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

   <H1>find file duplicates on very large volume</H1>
    <B>Peter Frings</B> 
    <A HREF="mailto:x-apps%40listserver.themacintoshguy.com?Subject=find%20file%20duplicates%20on%20very%20large%20volume&In-Reply-To=990916C0-B8DF-11D7-A541-00306552C9FC%40village.uunet.be"
       TITLE="find file duplicates on very large volume">peter.frings at agfa.com
       </A><BR>
    <I>Fri Jul 18 00:23:52 PDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000856.html">[X-Apps] Excel Questions
</A></li>
        <LI>Next message: <A HREF="000858.html">[X-Apps] Excel Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#857">[ date ]</a>
              <a href="thread.html#857">[ thread ]</a>
              <a href="subject.html#857">[ subject ]</a>
              <a href="author.html#857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: &quot;R. Welz&quot; &lt;<A HREF="../../../mailman/listinfo/x-apps.html">r_welz at gmx.de</A>&gt;
</I>&gt;<i> Date: Wed, 16 Jul 2003 21:35:32 +0200
</I>&gt;<i>
</I>&gt;<i> My question is: When I have the HD with all the CDR on ot is there a
</I>&gt;<i> program which can handle and find duplicates? I mean not only duplicat
</I>&gt;<i> names but duplicate content (in text files for example). And with that
</I>&gt;<i> amount of content. And in reasonable time. Would SpringCleaning do the
</I>&gt;<i> job? How loNg would it take?
</I>
You can do it wit the help of some scripts (Terminal). The first one
(finddup) steps through all files and calculates the checksum of each. It
sends the file names and their checksum to the second script (groupdup.awk)
which groups the duplicates on a single line.

Save the scripts as separate file, make sure they have 'unix style line
endings', and make the first one (finddup) executable.

Note that the first script ignores small files, as it seems that
checksumming is only reliable on larger files. You can experiment a little
though (change the +20).

Also note that this script completely ignores filenames for comparison, it
just relies on the checksum. This allows you to find duplicates that are
named differently (e.g. 'My Document' and 'My Document 'Copy)').

Good luck
Peter.

--- this is the 'finddup' file -----
#!/bin/sh
#
# Find all duplicate files in my home directory
#
# Output: A file that contains the names of all
# identical files on a single line, separated by
# spaces.
# The file names are quoted.

dupdir=&quot;$HOME&quot;
dupfile=&quot;$HOME/dupgrp.idx&quot;

# print checksum for larger files (chksum doesn't work reliably
# on smaller files?), then
# save them all in a temp file. Also, take the first two words
# (chksum and file size), remove duplicate entries, and find the
# remainder in the temp file.
# Finally, groupdup prints them out nicely.
#
find $dupdir -size +20 \! -type d -exec cksum {} \; | sort | tee
/tmp/$$ | cut -f 1,2 -d ' ' | uniq -d | grep -hif - /tmp/$$ \
     | groupdup.awk &gt; $dupfile
# alternatively, just create the file
#    &gt; $dupfile
---- end of file ---------






--- this is the 'groupdup.awk' file -----
#! /usr/bin/awk -f
#
# Group file names with the same checksum on a single line.
#
# Input: a sorted file with a file name per line.
# The first word on the line is assumed to be the checksum,
# the second word is ignored, and the last word is supposed
# to be the file name. File names are quoted,
# but I'm not yet sure what happens when file names have
# spaces
#
# Output: a sorted files where all duplicate files are
# on a single line, separated by space. The file names are
# quoted.
#
BEGIN {
     chksum = 0;
     seqnr = 0;
}


{
     if ( $1 == chksum )    {
    # same chksum -&gt; print on same line

    printf &quot; '%s'&quot;, $3;
     }
     else {
    # different chksum (unless start of file) -&gt; start new line

    if ( chksum != 0) {
        printf &quot;\n&quot;;
    }
    
#    printf &quot;%s '%s'&quot;, $1, $3;
    printf &quot;'%s'&quot;, $3;
    chksum = $1;
     }
}

END {
     printf &quot;\n&quot;;
}
----- end of file -------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000856.html">[X-Apps] Excel Questions
</A></li>
	<LI>Next message: <A HREF="000858.html">[X-Apps] Excel Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#857">[ date ]</a>
              <a href="thread.html#857">[ thread ]</a>
              <a href="subject.html#857">[ subject ]</a>
              <a href="author.html#857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/x-apps.html">More information about the X-Apps
mailing list</a><br>
<hr />
<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

</body></html>
