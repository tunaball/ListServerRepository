<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Ti] utility for defragmenting my internal HAD?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:titanium%40listserver.themacintoshguy.com?Subject=%5BTi%5D%20utility%20for%20defragmenting%20my%20internal%20HAD%3F&In-Reply-To=list-4162908%40mail.ninewire.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001183.html">
   <LINK REL="Next"  HREF="001185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">

<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

   <H1>[Ti] utility for defragmenting my internal HAD?</H1>
    <B>Mark C. Langston</B> 
    <A HREF="mailto:titanium%40listserver.themacintoshguy.com?Subject=%5BTi%5D%20utility%20for%20defragmenting%20my%20internal%20HAD%3F&In-Reply-To=list-4162908%40mail.ninewire.com"
       TITLE="[Ti] utility for defragmenting my internal HAD?">mark at bitshift.org
       </A><BR>
    <I>Fri Dec 20 16:36:46 PST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001183.html">[Ti] utility for defragmenting my internal HAD?
</A></li>
        <LI>Next message: <A HREF="001185.html">[Ti] OS X 10.2.3 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1184">[ date ]</a>
              <a href="thread.html#1184">[ thread ]</a>
              <a href="subject.html#1184">[ subject ]</a>
              <a href="author.html#1184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Dec 20, 2002 at 04:09:50PM -0800, Brett V. Gaspers wrote:
&gt;<i> Um...hate to say the emperor is wearing no clothes here, but isn't 
</I>&gt;<i> the filesystem used by OSX AND OS9 HFS+? And this is the same 
</I>&gt;<i> filesystem we've been using for several years?
</I>&gt;<i> 
</I>&gt;<i> Or are you talking about UFS? (which very few Mac users are or should be using)
</I>

It seems my understanding, and thus my explanation, were incomplete.
Since I mentioned inodes, the description I gave would more accurately
pertain to UFS.  However, OS X uses HFS+ (whereas OS 9 uses HFS (no
plus)).

HFS+, it appears, uses vnodes, which is similar in concept to the
Solaris vnode implementation in terms of content, but apparently
not use.  Whereas in standard BFFS-derived filesystems the inodes
or vnodes are decoupled from the data itself on the physical disk,
they are part and parcel of the data on the disk in HFS+, thus
preserving the complex file architecture of the earlier HFS,
allowing for multiple data and resource forks per file.  This
also has the implication of providing only (it seems from my
research) one vnode per file, rather than multiple inodes per
file as is common in BFFS-derived systems.  It is, however,
different from the old HFS data/resource fork dichotomy because
in HFS+, the metadata is stored in the data fork of a separate
resource file.

It also seems that this approach eliminates the possibility of
hardlinks in HFS+, which is somewhat odd given the rest of the
OS's BSD underpinnings.

What I'd really love to find is a document laying out the
data structures of HFS+ and the atomic operations, without requiring
that I go download and pore over the Darwin source.  

One thing I did find is that HFS+ does not support sparse files,
and thus there's some waste in the file storage mechanism.  


So, in answer to the question raised, &quot;no.&quot;  We're not talking about the
same old filesystem used in OS9.  However, I'm unable to obtain
sufficient documentation right this minute to determine how HFS+ deals
with linking and unlinking of blocks on the physical disk, and how reads
occur, so I can't make a definitive statement regarding its robustness
in avoiding fragmentation issues.  I also retract the one I made
earlier; I was under the mistaken impression that HFS+ had moved farther
towards a BFFS derivative than it appears it has.


-- 
Mark C. Langston                                    Sr. Unix SysAdmin
<A HREF="../../../mailman/listinfo/titanium.html">mark at bitshift.org</A>                                       <A HREF="../../../mailman/listinfo/titanium.html">mark at seti.org</A>
Systems &amp; Network Admin                                SETI Institute
<A HREF="http://bitshift.org">http://bitshift.org</A>                               <A HREF="http://www.seti.org">http://www.seti.org</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001183.html">[Ti] utility for defragmenting my internal HAD?
</A></li>
	<LI>Next message: <A HREF="001185.html">[Ti] OS X 10.2.3 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1184">[ date ]</a>
              <a href="thread.html#1184">[ thread ]</a>
              <a href="subject.html#1184">[ subject ]</a>
              <a href="author.html#1184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/titanium.html">More information about the Titanium
mailing list</a><br>
<hr />
<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

</body></html>
