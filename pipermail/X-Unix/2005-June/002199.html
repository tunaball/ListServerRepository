<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [X-Unix] Cron problem - Again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:x-unix%40listserver.themacintoshguy.com?Subject=%5BX-Unix%5D%20Cron%20problem%20-%20Again&In-Reply-To=20050623215446.BC4D6463CD8%40listserver.themacintoshguy.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002198.html">
   <LINK REL="Next"  HREF="002202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">

<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

   <H1>[X-Unix] Cron problem - Again</H1>
    <B>Robert Frank</B> 
    <A HREF="mailto:x-unix%40listserver.themacintoshguy.com?Subject=%5BX-Unix%5D%20Cron%20problem%20-%20Again&In-Reply-To=20050623215446.BC4D6463CD8%40listserver.themacintoshguy.com"
       TITLE="[X-Unix] Cron problem - Again">robert.frank at unibas.ch
       </A><BR>
    <I>Fri Jun 24 01:42:04 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002198.html">[X-Unix] Cron problem - Again
</A></li>
        <LI>Next message: <A HREF="002202.html">[X-Unix] zip from command-line in Tiger
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2199">[ date ]</a>
              <a href="thread.html#2199">[ thread ]</a>
              <a href="subject.html#2199">[ subject ]</a>
              <a href="author.html#2199">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>With the new systemV like cronjob handling, every user has his/her  
own cronjob. So cron will run as the user who initiates crontab -e,  
unless you specify a different user with the -u option, which only  
the root user may do.

The BSD cronjob handling is still available, you just edit /etc/ 
crontab using any editor. Entries in that file will be run as root.

As to the script, why not put the entire command into the script and  
then just run that from cron?

/users/marleygraham/screenpict may contain:

#!/bin/bash
/usr/sbin/screencapture /full/path/to/file/mg`/bin/date +%r | /usr/ 
bin/awk '{ print $1}'`
(This is the power of shell scripting:
first, I append the date string directly to the letters 'mg' by  
calling the commands date and awk in backquotes `..`
then I execute the screencapture program with that argument.
Within the backquotes, I pipe (|) the date command to awk which  
extracts the first field.

However, this is still a cludge, as we don't need awk (a huge thing!):

/usr/sbin/screencapture /full/path/to/file/mg`/bin/date +%H:%M%S`

or, if you must have the 12 hour clock (not recommended in this case,  
as this will overwrite the files!):

/usr/sbin/screencapture /full/path/to/file/mg`/bin/date +%I:%M%S`

Now, of course, you can go and put this into cron directly, but then  
you will have to edit crontab each time you want to change something.  
Keeping the commands in a file will allow you to
make changes and check them without modifying the cron entry.

Make sure the file is executable by the user with which cron is running.
And one more point: in your solution,  the file to write to is given  
as 'mg...', i.e. as a relative path. It will be wriiten to the  
directory from which cron runs the script. And this need not be the  
place of the script. So: provide the full path to the files to be on  
the safe side!


On 23 Jun 2005, at 23:54, x-unix- 
<A HREF="../../../mailman/listinfo/x-unix.html">request at listserver.themacintoshguy.com</A> wrote:

&gt;<i> I have my screencapture program running under cron on my machine. So
</I>&gt;<i> I figured I would do the same on some client machines for which I
</I>&gt;<i> have set up an admin account. But it doesn't work on the client
</I>&gt;<i> machines. Here is what I have:
</I>&gt;<i>
</I>&gt;<i> On my machine:
</I>&gt;<i> $ crontab -l
</I>&gt;<i> 0,30 7-16 * * 1-6 /users/marleygraham/screenpict
</I>&gt;<i>
</I>&gt;<i> Where screenpict is the script:
</I>&gt;<i> #!/bin/bash
</I>&gt;<i> /usr/sbin/screencapture mg$(/users/marleygraham/exacttime)
</I>&gt;<i> exit
</I>&gt;<i>
</I>&gt;<i> And exacttime is the script:
</I>&gt;<i> #!/bin/bash
</I>&gt;<i> /bin/date +%r &gt; tempdate
</I>&gt;<i> awk '{print $1}' tempdate
</I>&gt;<i> rm tempdate
</I>&gt;<i> exit
</I>&gt;<i>
</I>&gt;<i> On the client machine, I have set up an admin user isadmin. I logged
</I>&gt;<i> onto the client over ssh and set up the cron job using crontab -e.
</I>&gt;<i> Then I copied the scripts to the  client using ARD copy, changed the
</I>&gt;<i> owner to isadmin, and edited to change the username. So on the client
</I>&gt;<i> I have:
</I>&gt;<i>
</I>&gt;<i> n$ crontab -l
</I>&gt;<i> 0,30 7-16 * * 1-6 /screenpicsa
</I>&gt;<i>
</I>&gt;<i> Where screenpicsa is:
</I>&gt;<i> #!/bin/bash
</I>&gt;<i> /usr/sbin/screencapture /isscreen$(/exacttime)
</I>&gt;<i> exit
</I>&gt;<i>
</I>&gt;<i> And exacttime is:
</I>&gt;<i> #!/bin/bash
</I>&gt;<i> /bin/date +%r &gt; tempdate
</I>&gt;<i> awk '{print $1}' tempdate
</I>&gt;<i> rm tempdate
</I>&gt;<i> exit
</I>&gt;<i>
</I>&gt;<i> The files look like:
</I>&gt;<i> -rwxr-xr-x    1 isadmin  isadmin       82 22 Jun 16:40 exacttime
</I>&gt;<i> -rwxr-xr-x    1 isadmin  isadmin       67 23 Jun 08:21 screenpicsa
</I>&gt;<i>
</I>&gt;<i> I am not getting any files generated by cron. Any ideas why?
</I>&gt;<i>
</I>&gt;<i> Marley Graham
</I>&gt;<i> Aqua-Flo Supply
</I>&gt;<i> ==============
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
Departement Informatik   FGB   tel   +41 (0)61 267 14 66
Universit&#228;t Basel                          fax. +41 (0)61 267 14 61
Robert Frank
Klingelbergstrasse 50                 <A HREF="../../../mailman/listinfo/x-unix.html">Robert.Frank at unibas.ch</A>
CH-4056 Basel
Switzerland                                   http:// 
www.informatik.unibas.ch/personen/frank_r.html


</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002198.html">[X-Unix] Cron problem - Again
</A></li>
	<LI>Next message: <A HREF="002202.html">[X-Unix] zip from command-line in Tiger
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2199">[ date ]</a>
              <a href="thread.html#2199">[ thread ]</a>
              <a href="subject.html#2199">[ subject ]</a>
              <a href="author.html#2199">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/x-unix.html">More information about the X-Unix
mailing list</a><br>
<hr />
<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

</body></html>
