<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [X-Unix] copy 101 question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:x-unix%40listserver.themacintoshguy.com?Subject=%5BX-Unix%5D%20copy%20101%20question&In-Reply-To=list-13744659%40mail.ninewire.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000866.html">
   <LINK REL="Next"  HREF="000868.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">

<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

   <H1>[X-Unix] copy 101 question</H1>
    <B>James Bucanek</B> 
    <A HREF="mailto:x-unix%40listserver.themacintoshguy.com?Subject=%5BX-Unix%5D%20copy%20101%20question&In-Reply-To=list-13744659%40mail.ninewire.com"
       TITLE="[X-Unix] copy 101 question">subscriber at gloaming.com
       </A><BR>
    <I>Sat Jun  5 15:14:06 PDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000866.html">How can a fill a hard drive with data?
</A></li>
        <LI>Next message: <A HREF="000868.html">[X-Unix] How can a fill a hard drive with data?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#867">[ date ]</a>
              <a href="thread.html#867">[ thread ]</a>
              <a href="subject.html#867">[ subject ]</a>
              <a href="author.html#867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Scott Warren wrote on Saturday, June 5, 2004:

&gt;<i>I am wanting to back up just .doc files onto my firewire drive.  What 
</I>&gt;<i>is the Mac/Unix version of
</I>&gt;<i>   xcopy *.doc E:\backup -r
</I>&gt;<i>
</I>&gt;<i>I have tried  cp -R *.doc \volumes\myfirewire    and this only copies 
</I>&gt;<i>whats in the current directory and does not recurs the tree.
</I>
Welcome to UNIX.

What you're trying to do it a little foreign to UNIX.  Unlike DOS, most UNIX program don't do their own globbing and recursion.  It's the job of the shell to expand '*.doc', and pass that as multiple arguments to the tool.  Consequently, you can't combine recursion with shell patterns.

But fear not:  I guarantee you that there's nothing you can do in DOS that you can't do in UNIX!

In UNIX, the Swiss Army knife of directory recursion is the Find tool.  Heres one way to use the find tool in combination with the tar (Tape ARchive) tool to transfer a sparse set of hierarchically organized files from one directory tree to another:

    cd ~
    find Documents -type f -name '*.doc' -print0 | tar -cf - --files-from - --null | tar -xvf - -C /Volumes/firewire

In English, I used the find tool to search my entire Documents folder for regular files (this excludes any directories or symbolic links) who's name matches the patter '*.doc'.  I piped this list to the tar tool and told it to create an archive (c) outputting the results to stdout (-f -).  Instead of listing the files to archive on the command, I told it to read the list of files from stdin (which will be the output of the find tool).  Finally, I piped the resulting archive directly into a second invocation of tar that extracts (-x) the archive read from stdin (-f -) into a specific directory (-C /Volumes/firewire).  The -v option just outputs the names of the files as they are processed so we can watch the fun.

The only other trick I used was to have find delimit the filenames with NULL characters instead of carriage returns, and I told tar to expect the filename list to be NULL terminated (--null) instead of a plain text list.  This combination makes it possible to safely process a list of filenames with all manor of special characters.  Remember that Mac filenames are Unicode, so they can contain any character in the world except slash (/) and NULL.

Having provided this example, I will now warn you that there are probably two dozen other ways of accomplishing the same thing.  Most probably much better than this example.  If you're doing this for backup purposes, I'd investigate the many synchronization programs that exist.  These will automatically mirror one directory tree to another, and do it incrementally so that it's fast and efficient.  Other tools will property preserve the Macintosh resource forks, which are extremely important to preserve for some file types.

If you're really interested in the OS X shell, there are tons of good books out there on using the UNIX shell, many written specifically for Macintosh users.  Check out the Mac OS X section of O'Reilly &lt;<A HREF="http://mac.oreilly.com/">http://mac.oreilly.com/</A>&gt;.

______________________________________________________
James Bucanek       &lt;mailto:<A HREF="../../../mailman/listinfo/x-unix.html">privatereply at gloaming.com</A>&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000866.html">How can a fill a hard drive with data?
</A></li>
	<LI>Next message: <A HREF="000868.html">[X-Unix] How can a fill a hard drive with data?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#867">[ date ]</a>
              <a href="thread.html#867">[ thread ]</a>
              <a href="subject.html#867">[ subject ]</a>
              <a href="author.html#867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/x-unix.html">More information about the X-Unix
mailing list</a><br>
<hr />
<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

</body></html>
