<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [X-Unix] question about 'find'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:x-unix%40listserver.themacintoshguy.com?Subject=%5BX-Unix%5D%20question%20about%20%27find%27&In-Reply-To=a06100586bfb3e6a8bfaf%40%5B192.168.0.7%5D">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="002498.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">

<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

   <H1>[X-Unix] question about 'find'</H1>
    <B>Stewart C. Russell</B> 
    <A HREF="mailto:x-unix%40listserver.themacintoshguy.com?Subject=%5BX-Unix%5D%20question%20about%20%27find%27&In-Reply-To=a06100586bfb3e6a8bfaf%40%5B192.168.0.7%5D"
       TITLE="[X-Unix] question about 'find'">scruss at scruss.com
       </A><BR>
    <I>Thu Dec  1 10:33:46 PST 2005</I>
    <P><UL>
        
        <LI>Next message: <A HREF="002498.html">[X-Unix] deactivate finder and dock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2497">[ date ]</a>
              <a href="thread.html#2497">[ thread ]</a>
              <a href="subject.html#2497">[ subject ]</a>
              <a href="author.html#2497">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Ledger wrote:
&gt;<i>
</I>&gt;&gt;<i> You do have to be careful with xargs if you're processing a *lot* of
</I>&gt;&gt;<i> arguments. BSD xargs has a default argument limit of 5000 (hidden in the
</I>&gt;&gt;<i> '-n' para of the manual), so if you're calling xargs through sort (say),
</I>&gt;&gt;<i> the results may not be what you expect.
</I>&gt;<i> 
</I>&gt;<i> That's not what it means.
</I>
It might not be what it means, but it's what it does.

On OS X:

$ perl -le 'for (1..5000) {print $_;}' | xargs echo | wc -l
        1
$ perl -le 'for (1..5001) {print $_;}' | xargs echo | wc -l
        2

So in effect, there's a default '-n 5000' in the xargs invocation, for 
in the second case 'echo' is being called twice. It's different on other 
unices, f'rinstance with Gnu xargs on Cygwin:

$ perl -le 'for (1..5954) {print $_;}' | xargs echo | wc -l
1
$ perl -le 'for (1..5955) {print $_;}' | xargs echo | wc -l
2

Gnu xargs has a default maximum command line length of 128KB, so in this 
case, the rollover to two command invocations comes after more input 
than does OS X.

It's not safe to assume that xargs will always make just one invocation 
of its command argument. It's definitely a trap for the unwary.

&gt;<i> As a pedantic sidenote, the arguments to xargs are what you type as 
</I>&gt;<i> arguments.
</I>
Is this the five minute argument, or the full half hour? ;-)

&gt;<i> On OS X, xargs thinks all commands can cope 
</I>&gt;<i> with 5000 arguments unless you specify otherwise with '-n &lt;number&gt;'.
</I>
Which is what I said.

&gt;<i> I define a shell function which I call fnf (FileName Fix):
</I>&gt;<i>     fnf() { sed &quot;s/\([      '\&quot;]\)/\\\\\1/g&quot;; }
</I>
Handy! Thanks.

&gt;<i> If you mean piping the stream into a while loop and invoking the 
</I>&gt;<i> sub-command once for each item, that's even less efficient than 
</I>&gt;<i> '-exec'.
</I>
But I'm generally running scripts that:
* filter one input file into one output file, so a loop makes sense, and
* take a trivial amount of time to run compared to the invocation of 
each filter.

If you're worried about efficiency over expediency, you shouldn't be 
using shell.

cheers,
  Stewart
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="002498.html">[X-Unix] deactivate finder and dock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2497">[ date ]</a>
              <a href="thread.html#2497">[ thread ]</a>
              <a href="subject.html#2497">[ subject ]</a>
              <a href="author.html#2497">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/x-unix.html">More information about the X-Unix
mailing list</a><br>
<hr />
<!--GoogleAdsAutomaticSizeSTART-->
<p align=CENTER>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Automatic Size -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1785703837751368"
     data-ad-slot="4468313549"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<!--GoogleAdsAutomaticSizeEND-->

</body></html>
